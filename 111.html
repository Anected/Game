<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>HTML5 Canvas - Лабиринт</title>
    <style>
        canvas {
            border: 6px double black;
            background: white;
        }
    </style>

</head>
<body>
<canvas width="500" height="500"></canvas>
<script>
    let canvas = document.querySelector("canvas");
    let context = canvas.getContext("2d");
    let width = 20;
    let height = 20;
    let xc = 5;
    let yc = 5;
    let x1 = 0;
    let y1 = 1;
    let x2 = 0;
    let y2 = 2;
    let x3 = 0;
    let y3 = -1;
    let x4 = 0;
    let y4 = -2;
    let a = [
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    ];

    const Draw = arr => {
        for (var i = 0; i < arr.length; i++) {
            for (var j = 0; j < arr[i].length; j++) {
                if (arr[i][j] === 0) {
                    context.fillStyle = 'red';
                    context.fillRect(j * width, i * height, width, height);
                }
                else {
                    context.fillStyle = 'green';
                    context.fillRect(j * width, i * height, width, height);
                    context.strokeRect(j * width, i * height, width, height);
                }
            }
        }
    };
    const drawElement = (x,y) => {
        a[y][x] = 1;

    };
    const arrMove = arr => {
        for (var i = 0; i < arr.length; i++) {
            if (arr[i].indexOf(0) === -1) {
                arr.splice(i, 1);
                arr.unshift([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
            }
        }
    };
    const pointTest = (x, y) => {
        return (a[y][x] === 0) && (y <= a.length) && (x <= a[1].length);
    };

    const elementTest = () => {
        return !!(pointTest(xc, yc) &&
            pointTest(xc + x1, yc + y1) &&
            pointTest(xc + x2, yc + y2) &&
            pointTest(xc + x3, yc + y3) &&
            pointTest(xc + x4, yc + x4));
    };

    const move = () => {

    }
    addEventListener("keydown", function (event) {
        switch (event.keyCode) {
            case 37: {
                let oldxc = xc;
                xc--;
                a[yc][oldxc] = 0;
                drawElement(xc,yc);
                break;
            };
            case 39: {
                let oldxc = xc;
                xc++;
                a[yc][oldxc] = 0;
                drawElement(xc,yc);
                break;
            };
            case 40: {
                let oldyc = yc;
                yc++;
                a[oldyc][xc] = 0;
                drawElement(xc,yc);
                break;
            };

            //case 32:
            // case 38 : {
            //    tetris.move('rotate')
            //     break
            //}
            default:
                console.log(event.keyCode);
        }
    Draw(a);
    });
    Draw(a);
    // setTimeout(() => {
    //  arrMove(a);
    //   drawElement();
    //   Draw(a);
    //}, 2000);

</script>
</body>

</html>

